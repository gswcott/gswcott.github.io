/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/core/firework.js":
/*!******************************!*\
  !*** ./src/core/firework.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Particle\": () => (/* binding */ Particle),\n/* harmony export */   \"updateParticles\": () => (/* binding */ updateParticles),\n/* harmony export */   \"drawParticles\": () => (/* binding */ drawParticles)\n/* harmony export */ });\n/* harmony import */ var _tool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tool */ \"./src/core/tool.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\nvar Particle = function Particle(x, y, r, maxLife, type, color) {\n  _classCallCheck(this, Particle);\n\n  this.x = x;\n  this.y = y;\n  this.r = r;\n  this.maxLife = maxLife;\n  this.type = type;\n  this.life = maxLife;\n\n  if (this.type !== \"glitter\") {\n    this.life = (0,_tool__WEBPACK_IMPORTED_MODULE_0__.lerp)(maxLife / 2, maxLife, Math.random());\n  }\n\n  this.color = color;\n  this.vx = 0;\n  this.vy = 0;\n  var angle = Math.random() * 2 * Math.PI;\n\n  if (type === \"glitter\") {\n    var v = 10 + Math.random() * 10;\n    this.vx = v * Math.cos(angle);\n    this.vy = v * Math.sin(angle);\n  }\n};\nvar updateParticles = function updateParticles(particles, dt) {\n  for (var i = particles.length - 1; i >= 0; i--) {\n    var p = particles[i];\n    p.x += p.vx * dt;\n    p.y += p.vy * dt;\n    p.life -= dt;\n\n    if (p.type === \"glitter\") {\n      p.color[3] = p.life / p.maxLife;\n    }\n\n    if (p.life <= 0) {\n      particles.splice(i, 1);\n    }\n  }\n};\nvar drawParticles = function drawParticles(ctx, particles) {\n  for (var i = 0; i < particles.length; i++) {\n    var p = particles[i];\n    ctx.fillStyle = (0,_tool__WEBPACK_IMPORTED_MODULE_0__.convertRGBA)(p.color);\n\n    if (p.type === \"glitter\") {\n      ctx.fillRect(p.x, p.y, 2 * p.r, 2 * p.r);\n    }\n  }\n};\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/core/firework.js?");

/***/ }),

/***/ "./src/core/tool.js":
/*!**************************!*\
  !*** ./src/core/tool.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Quad\": () => (/* binding */ Quad),\n/* harmony export */   \"randomInt\": () => (/* binding */ randomInt),\n/* harmony export */   \"convertRGB\": () => (/* binding */ convertRGB),\n/* harmony export */   \"convertRGBA\": () => (/* binding */ convertRGBA),\n/* harmony export */   \"getRandomColor\": () => (/* binding */ getRandomColor),\n/* harmony export */   \"lerp\": () => (/* binding */ lerp),\n/* harmony export */   \"whiten\": () => (/* binding */ whiten),\n/* harmony export */   \"coordToPos\": () => (/* binding */ coordToPos),\n/* harmony export */   \"isRCValid\": () => (/* binding */ isRCValid),\n/* harmony export */   \"isRCValidFourDirs\": () => (/* binding */ isRCValidFourDirs),\n/* harmony export */   \"isInButton\": () => (/* binding */ isInButton),\n/* harmony export */   \"drawText\": () => (/* binding */ drawText),\n/* harmony export */   \"drawCombo\": () => (/* binding */ drawCombo),\n/* harmony export */   \"drawScore\": () => (/* binding */ drawScore),\n/* harmony export */   \"drawTitle\": () => (/* binding */ drawTitle),\n/* harmony export */   \"Button\": () => (/* binding */ Button),\n/* harmony export */   \"ImgButton\": () => (/* binding */ ImgButton),\n/* harmony export */   \"Explosion\": () => (/* binding */ Explosion),\n/* harmony export */   \"Camera\": () => (/* binding */ Camera),\n/* harmony export */   \"Bezier\": () => (/* binding */ Bezier),\n/* harmony export */   \"Scoring\": () => (/* binding */ Scoring),\n/* harmony export */   \"renderQuad\": () => (/* binding */ renderQuad),\n/* harmony export */   \"Bubble\": () => (/* binding */ Bubble),\n/* harmony export */   \"RowBubbles\": () => (/* binding */ RowBubbles),\n/* harmony export */   \"VirtualScreen\": () => (/* binding */ VirtualScreen),\n/* harmony export */   \"distPoints\": () => (/* binding */ distPoints),\n/* harmony export */   \"collide\": () => (/* binding */ collide)\n/* harmony export */ });\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Quad = function Quad(x, y, w, h) {\n  _classCallCheck(this, Quad);\n\n  this.x = x;\n  this.y = y;\n  this.w = w - 0.1; //Pour Ã©viter le \"edge bleeding\"\n\n  this.h = h - 0.1;\n};\n\nvar getLetterQuads = function getLetterQuads(tsW, tsH, w, h) {\n  var animalQuads = {};\n\n  for (var i = 0; i <= 9; i++) {\n    var quad = new Quad(i * tsW, tsH, w, h);\n    animalQuads[i.toString()] = quad;\n  }\n\n  animalQuads[\" \"] = new Quad(0, 0, w, h);\n  animalQuads[\":\"] = new Quad(10 * tsW, tsH, w, h);\n  var alphabets = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"];\n\n  for (var _i = 0; _i < 26; _i++) {\n    var _quad = void 0;\n\n    if (_i < 15) {\n      _quad = new Quad((_i + 1) * tsW, 2 * tsH, w, h);\n    } else if (_i < 26) {\n      _quad = new Quad((_i - 15) * tsW, 3 * tsH, w, h);\n    }\n\n    animalQuads[alphabets[_i]] = _quad;\n  }\n\n  return animalQuads;\n};\n\nvar letterQuads = getLetterQuads(12, 13, 12, 13);\nvar randomInt = function randomInt(nb) {\n  return Math.floor(Math.random() * nb);\n};\nvar convertRGB = function convertRGB(colorArray) {\n  var res = \"rgb(+\" + colorArray[0] + \", \" + colorArray[1] + \", \" + colorArray[2] + \")\";\n  return res;\n};\nvar convertRGBA = function convertRGBA(colorArray) {\n  return \"rgba(\".concat(colorArray[0], \", \").concat(colorArray[1], \", \").concat(colorArray[2], \", \").concat(colorArray[3], \")\");\n};\nvar getRandomColor = function getRandomColor() {\n  var lst = [Math.random() * 255, Math.random() * 255, Math.random() * 255, 1];\n  return lst;\n};\nvar lerp = function lerp(a, b, t) {\n  return (1 - t) * a + t * b;\n};\nvar whiten = function whiten(color, t) {\n  return [lerp(color[0], 255, t), lerp(color[1], 255, t), lerp(color[2], 255, t), color[3]];\n};\nvar coordToPos = function coordToPos(x, y, csW, csH) {\n  var r = Math.floor(y / csH);\n  var c = Math.floor(x / csW);\n  return {\n    r: r,\n    c: c\n  };\n};\nvar isRCValid = function isRCValid(r, c, nbRows, nbCols) {\n  if (r >= 0 && r < nbRows && c >= 0 && c < nbCols) {\n    return true;\n  }\n\n  return false;\n};\nvar isRCValidFourDirs = function isRCValidFourDirs(r, c, r0, c0) {\n  if (r === r0 - 1 && c === c0 || r === r0 + 1 && c === c0 || r === r0 && c === c0 || r === r0 && c === c0 - 1 || r === r0 && c === c0 + 1) {\n    return true;\n  }\n\n  return false;\n};\nvar isInButton = function isInButton(x, y, button) {\n  if (x >= button.x && x <= button.x + button.w && y >= button.y && y <= button.y + button.h) {\n    return true;\n  }\n\n  return false;\n};\nvar drawText = function drawText(ctx, text, align, color, font, x, y, w, h) {\n  ctx.font = font;\n  ctx.fillStyle = convertRGB(color);\n  var textW = ctx.measureText(text).width;\n  var textH = ctx.measureText(\"M\").width;\n  var x0 = x;\n  var y0 = y + (h + textH) / 2;\n\n  if (align === \"CENTER\") {\n    x0 = x + (w - textW) / 2;\n  }\n\n  ctx.fillText(text, x0, y0);\n};\nvar drawCombo = function drawCombo(ctx, imgFont, text, startX, startY, endX, endY, scale) {\n  var quad = letterQuads[\"A\"];\n  var maxWidth = text.length * quad.w * scale;\n\n  if (maxWidth > endX - startX) {\n    scale = (endX - startX) / (text.length * quad.w);\n  }\n\n  var x = startX;\n  var y = startY;\n\n  for (var i = 0; i < text.length; i++) {\n    var _quad2 = letterQuads[text[i]];\n\n    if (i !== 0) {\n      x += _quad2.w * scale;\n    }\n\n    y = Math.floor((startY + endY) / 2 - _quad2.h * scale / 2);\n    ctx.drawImage(imgFont, _quad2.x, _quad2.y, _quad2.w, _quad2.h, x, y, _quad2.w * scale, _quad2.h * scale);\n  }\n};\nvar drawScore = function drawScore(ctx, imgFont, totalScore, startX, startY, endX, endY, scale, gapStop) {\n  var gapAfterScore = 5;\n  var scoreText = \"SCORE\";\n  var quad = letterQuads[\"A\"];\n  var maxWidth = (scoreText.length + 10) * quad.w * scale + gapAfterScore + 2 * gapStop;\n\n  if (maxWidth > endX - startX) {\n    scale = (endX - startX - gapAfterScore - 2 * gapStop) / ((scoreText.length + 8) * quad.w);\n  }\n\n  var x = startX;\n  var y = startY;\n  totalScore = totalScore.toString();\n\n  for (var i = 0; i < scoreText.length; i++) {\n    var _quad3 = letterQuads[scoreText[i]];\n\n    if (i !== 0) {\n      x += _quad3.w * scale;\n    }\n\n    y = Math.floor((startY + endY) / 2 - _quad3.h * scale / 2);\n    ctx.drawImage(imgFont, _quad3.x, _quad3.y, _quad3.w, _quad3.h, x, y, _quad3.w * scale, _quad3.h * scale);\n  }\n\n  x += gapAfterScore;\n\n  for (var _i2 = 0; _i2 < totalScore.length; _i2++) {\n    var _quad4 = letterQuads[totalScore[_i2]];\n    x += _quad4.w * scale;\n    y = Math.floor((startY + endY) / 2 - _quad4.h * scale / 2);\n    ctx.drawImage(imgFont, _quad4.x, _quad4.y, _quad4.w, _quad4.h, x, y, _quad4.w * scale, _quad4.h * scale);\n  }\n\n  return scale;\n};\nvar drawTitle = function drawTitle(ctx, text, imgFont, startX, startY, endX, endY, scale) {\n  var nbLetters = text.length;\n  var quad = letterQuads[\"A\"];\n  var gap = quad.w / 5;\n  var maxWidth = (nbLetters * (gap + quad.w) - gap) * scale;\n\n  if (maxWidth > (endX - startX) * 0.8) {\n    scale = (endX - startX) * 0.8 / (nbLetters * (gap + quad.w) - gap);\n    maxWidth = (nbLetters * (gap + quad.w) - gap) * scale;\n  }\n\n  var x = (startX + endX) / 2;\n  var y = (startY + endY) / 2;\n\n  for (var i = 0; i < nbLetters; i++) {\n    var _quad5 = letterQuads[text[i]];\n    var dx = x - maxWidth / 2 + i * (gap + _quad5.w) * scale;\n    var dy = y - _quad5.h * scale / 2;\n    ctx.drawImage(imgFont, _quad5.x, _quad5.y, _quad5.w, _quad5.h, dx, dy, Math.floor(_quad5.w * scale) + 1, Math.floor(_quad5.h * scale) + 1);\n  }\n\n  return scale;\n};\nvar Button = /*#__PURE__*/function () {\n  function Button(img, text, x, y, w, h, scale, bgColor) {\n    _classCallCheck(this, Button);\n\n    this.img = img;\n    this.text = text;\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    this.scale = scale;\n    this.bgColor = bgColor;\n  }\n\n  _createClass(Button, [{\n    key: \"draw\",\n    value: function draw(ctx) {\n      ctx.fillStyle = convertRGBA(this.bgColor);\n      ctx.fillRect(this.x, this.y, this.w, this.h);\n      drawTitle(ctx, this.text, this.img, this.x, this.y + 20 * Math.sin(Date.now() / 200), this.x + this.w, this.y + this.h, this.scale);\n    }\n  }]);\n\n  return Button;\n}();\nvar ImgButton = /*#__PURE__*/function () {\n  function ImgButton(img, x, y, scale) {\n    _classCallCheck(this, ImgButton);\n\n    this.img = img;\n    this.x = x;\n    this.y = y;\n    this.w = img.width * scale;\n    this.h = img.height * scale;\n    this.scale = scale;\n  }\n\n  _createClass(ImgButton, [{\n    key: \"draw\",\n    value: function draw(ctx) {\n      ctx.imageSmoothingEnabled = false;\n      ctx.drawImage(this.img, this.x, this.y, this.w, this.h);\n    }\n  }]);\n\n  return ImgButton;\n}();\nvar Explosion = function Explosion(maxLife, x0, y0, dirX, dirY, path, nbParticles) {\n  _classCallCheck(this, Explosion);\n\n  this.maxLife = maxLife;\n  this.life = maxLife;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.dirX = dirX;\n  this.dirY = dirY;\n  this.path = path;\n  this.nbParticles = nbParticles;\n};\nvar Camera = /*#__PURE__*/function () {\n  function Camera() {\n    _classCallCheck(this, Camera);\n\n    this.x = 0;\n    this.y = 0;\n  }\n\n  _createClass(Camera, [{\n    key: \"update\",\n    value: function update() {\n      this.x *= -0.7;\n      this.y *= -0.7;\n\n      if (Math.abs(this.x) < 0.01) {\n        this.x = 0;\n      }\n\n      if (Math.abs(this.y) < 0.01) {\n        this.y = 0;\n      }\n    }\n  }, {\n    key: \"shake\",\n    value: function shake() {\n      this.x = 7;\n      this.y = 4;\n    }\n  }]);\n\n  return Camera;\n}();\nvar Bezier = /*#__PURE__*/function () {\n  function Bezier(x0, y0, x1, y1, x2, y2) {\n    _classCallCheck(this, Bezier);\n\n    this.xstart = x0;\n    this.ystart = y0;\n    this.xmid = x1;\n    this.ymid = y1;\n    this.xend = x2;\n    this.yend = y2;\n  }\n\n  _createClass(Bezier, [{\n    key: \"getX\",\n    value: function getX(t) {\n      return lerp(lerp(this.xstart, this.xmid, t), lerp(this.xmid, this.xend, t), t);\n    }\n  }, {\n    key: \"getY\",\n    value: function getY(t) {\n      return lerp(lerp(this.ystart, this.ymid, t), lerp(this.ymid, this.yend, t), t);\n    }\n  }]);\n\n  return Bezier;\n}();\nvar Scoring = function Scoring(x, y, score) {\n  _classCallCheck(this, Scoring);\n\n  this.x = x;\n  this.y = y;\n  this.score = score;\n};\nvar renderQuad = function renderQuad(r, c, w, h, gap) {\n  var quad = {};\n  quad.x = c * 21 + gap;\n  quad.y = r * h;\n  quad.w = w;\n  quad.h = h;\n  return quad;\n};\nvar Bubble = /*#__PURE__*/function () {\n  function Bubble(id, x, y, r, active) {\n    _classCallCheck(this, Bubble);\n\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.r = r;\n    this.vx = 0;\n    this.vy = 0;\n    this.score = 0;\n    this.status = \"idle\";\n    this.flip = Math.random() < 0.5 ? false : true;\n    this.active = active;\n    this.notFallingChecked = false;\n    this.checked = false;\n    this.aFrameIndex = 0;\n    this.aAnimationSpeed = 0.3;\n    this.aAnimationTimer = this.aAnimationSpeed * (1 - Math.random());\n    this.animalQuads = [];\n    var gap = 3;\n\n    if (id === 0) {\n      gap = 4;\n    }\n\n    this.animalQuads.push(renderQuad(0, 0, 16, 16, gap));\n    this.animalQuads.push(renderQuad(0, 2, 16, 16, gap));\n    this.animalQuads.push(renderQuad(0, 1, 16, 16, gap));\n    this.bubbleQuad = new Quad(70, 70, 372, 372);\n    this.bFrameIndex = 0;\n    this.bAnimationSpeed = 0.08;\n    this.bAnimationTimer = this.bAnimationSpeed;\n  }\n\n  _createClass(Bubble, [{\n    key: \"draw\",\n    value: function draw(ctx, imgA, imgB, color) {\n      if (this.bFrameIndex === 0) {\n        ctx.beginPath();\n        ctx.fillStyle = convertRGBA(color);\n        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n\n      var animalQuad = this.animalQuads[this.aFrameIndex];\n\n      if (imgA) {\n        if (this.flip) {\n          ctx.save();\n          ctx.translate(this.x + this.r, this.y);\n          ctx.scale(-1, 1);\n          ctx.drawImage(imgA, animalQuad.x, animalQuad.y, animalQuad.w, animalQuad.h, this.r / 2, -this.r / 2, this.r, this.r);\n          ctx.restore();\n        } else {\n          ctx.drawImage(imgA, animalQuad.x, animalQuad.y, animalQuad.w, animalQuad.h, this.x - this.r / 2, this.y - this.r / 2, this.r, this.r);\n        }\n      }\n\n      if (this.bFrameIndex === 0) {\n        ctx.drawImage(imgB, this.x - this.r, this.y - this.r, 2 * this.r, 2 * this.r);\n      } else {\n        ctx.drawImage(imgB, this.bubbleQuad.x, this.bubbleQuad.y, this.bubbleQuad.w, this.bubbleQuad.h, this.x - this.r, this.y - this.r, 2 * this.r, 2 * this.r);\n      }\n\n      if (!this.active) {\n        ctx.beginPath();\n        ctx.fillStyle = convertRGBA([200, 200, 200, 0.7]);\n        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n  }]);\n\n  return Bubble;\n}();\nvar RowBubbles = /*#__PURE__*/function () {\n  function RowBubbles(y, indent) {\n    _classCallCheck(this, RowBubbles);\n\n    this.y = y;\n    this.indent = indent;\n    this.bubbles = [];\n  }\n\n  _createClass(RowBubbles, [{\n    key: \"addBubble\",\n    value: function addBubble(bubble) {\n      this.bubbles.push(bubble);\n    }\n  }, {\n    key: \"removeBubble\",\n    value: function removeBubble(bubble) {\n      this.bubbles.splice(this.bubbles.indexOf(bubble), 1);\n    }\n  }]);\n\n  return RowBubbles;\n}();\nvar VirtualScreen = /*#__PURE__*/function () {\n  function VirtualScreen(ctx, vW, vH, dW, dH) {\n    _classCallCheck(this, VirtualScreen);\n\n    this.ctx = ctx;\n    this.vW = vW;\n    this.vH = vH;\n    this.dW = dW;\n    this.dH = dH;\n    this.xoffset = 0;\n    this.yoffset = 0;\n    this.xScale = 1;\n    this.yScale = 1;\n    this.mouseClick = false;\n    this.mouseX = 0;\n    this.mouseY = 0;\n  }\n\n  _createClass(VirtualScreen, [{\n    key: \"setStrategy\",\n    value: function setStrategy() {\n      if (this.dH / this.dW > this.vH / this.vW) {\n        this.xScale = this.dW / this.vW;\n        this.yScale = this.xScale;\n        this.yoffset = (this.dH - this.yScale * this.vH) / 2;\n      } else {\n        this.yScale = this.dH / this.vH;\n        this.xScale = this.yScale;\n        this.xoffset = (this.dW - this.xScale * this.vW) / 2;\n      }\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      this.ctx.translate(this.xoffset, this.yoffset);\n      this.ctx.scale(this.xScale, this.yScale);\n    }\n  }]);\n\n  return VirtualScreen;\n}();\nvar distPoints = function distPoints(x1, y1, x2, y2) {\n  return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n};\nvar collide = function collide(b1, b2) {\n  var dist = distPoints(b1.x, b1.y, b2.x, b2.y);\n\n  if (dist <= (b1.r + b2.r) * (b1.r + b2.r)) {\n    return true;\n  }\n\n  return false;\n};\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/core/tool.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _main_main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main/main */ \"./src/main/main.js\");\n\n\nif (window.cordova) {\n  document.addEventListener(\"deviceready\", function () {\n    navigator.splashscreen.hide();\n    var main = new _main_main__WEBPACK_IMPORTED_MODULE_0__.Main();\n    main.start();\n  });\n} else {\n  var main = new _main_main__WEBPACK_IMPORTED_MODULE_0__.Main();\n  main.start();\n}\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/index.js?");

/***/ }),

/***/ "./src/main/fadeEnd.js":
/*!*****************************!*\
  !*** ./src/main/fadeEnd.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FadeEnd\": () => (/* binding */ FadeEnd)\n/* harmony export */ });\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/main/game.js\");\n/* harmony import */ var _gameover__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gameover */ \"./src/main/gameover.js\");\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Rect = function Rect(x, y, w, h) {\n  _classCallCheck(this, Rect);\n\n  this.centerX = x;\n  this.centerY = y;\n  this.w = w;\n  this.h = h;\n};\n\nvar FadeEnd = /*#__PURE__*/function () {\n  function FadeEnd(globals, toScene, score) {\n    _classCallCheck(this, FadeEnd);\n\n    this.globals = globals;\n    this.vScreen = globals.vScreen;\n    this.ctx = globals.ctx;\n    this.toScene = toScene;\n    this.score = score;\n    this.name = \"fadeEnd\";\n    this.distW = 48;\n    this.distH = 48;\n    this.rects = [];\n    this.fadeState = \"out\";\n    this.t = 0;\n  }\n\n  _createClass(FadeEnd, [{\n    key: \"init\",\n    value: function init() {\n      for (var x = 0; x < this.vScreen.dW + this.distW; x += this.distW) {\n        for (var y = 0; y < this.vScreen.dH + this.distH; y += this.distH) {\n          this.rects.push(new Rect(x, y, 0, 0));\n        }\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.fadeState === \"out\") {\n        this.t += 3 * dt;\n\n        if (this.t >= 1) {\n          this.t = 1;\n          this.fadeState = \"in\";\n          var newScene;\n\n          if (this.toScene === \"game\") {\n            newScene = new _game__WEBPACK_IMPORTED_MODULE_0__.Game(this.globals);\n          } else if (this.toScene === \"gameover\") {\n            newScene = new _gameover__WEBPACK_IMPORTED_MODULE_1__.Gameover(this.globals, this.score);\n          }\n\n          newScene.init();\n          this.globals.scenes.splice(this.globals.scenes.length - 2, 1, newScene);\n        }\n      } else if (this.fadeState === \"in\") {\n        this.t -= 3 * dt;\n\n        if (this.t <= 0) {\n          this.t = 0;\n          this.globals.scenes.splice(this.globals.scenes.length - 1, 1);\n\n          if (this.toScene === \"game\") {\n            this.globals.assets.bgMusic.play();\n          }\n        }\n      }\n\n      for (var i = 0; i < this.rects.length; i++) {\n        var rect = this.rects[i];\n        rect.w = this.distW * this.t;\n        rect.h = this.distH * this.t;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      for (var i = 0; i < this.rects.length; i++) {\n        var rect = this.rects[i];\n        this.ctx.fillStyle = \"rgb(0, 0, 0)\";\n        this.ctx.fillRect(rect.centerX - rect.w / 2, rect.centerY - rect.h / 2, rect.w, rect.h);\n      }\n    }\n  }]);\n\n  return FadeEnd;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/fadeEnd.js?");

/***/ }),

/***/ "./src/main/fadeStart.js":
/*!*******************************!*\
  !*** ./src/main/fadeStart.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FadeStart\": () => (/* binding */ FadeStart)\n/* harmony export */ });\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/main/game.js\");\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Circle = function Circle(x, y, r) {\n  _classCallCheck(this, Circle);\n\n  this.x = x;\n  this.y = y;\n  this.r = r;\n};\n\nvar FadeStart = /*#__PURE__*/function () {\n  function FadeStart(globals) {\n    _classCallCheck(this, FadeStart);\n\n    this.globals = globals;\n    this.vScreen = globals.vScreen;\n    this.ctx = globals.ctx;\n    this.name = \"fadeStart\";\n    this.radius = 45;\n    this.dist = 64;\n    this.circles = [];\n    this.fadeState = \"out\";\n    this.t = 0;\n  }\n\n  _createClass(FadeStart, [{\n    key: \"init\",\n    value: function init() {\n      for (var x = 0; x < this.vScreen.vW + this.radius; x += this.dist) {\n        for (var y = 0; y < this.vScreen.vH + this.radius; y += this.dist) {\n          var c = new Circle(x, y, 0);\n          this.circles.push(c);\n        }\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.fadeState === \"out\") {\n        this.t += 3 * dt;\n\n        if (this.t >= 1) {\n          this.t = 1;\n          this.fadeState = \"in\";\n          var game = new _game__WEBPACK_IMPORTED_MODULE_0__.Game(this.globals);\n          game.init();\n          this.globals.scenes.splice(this.globals.scenes.length - 2, 1, game);\n        }\n      } else if (this.fadeState === \"in\") {\n        this.t -= 3 * dt;\n\n        if (this.t <= 0) {\n          this.t = 0;\n          this.globals.scenes.splice(this.globals.scenes.length - 1, 1);\n          this.globals.assets.bgMusic.play();\n        }\n      }\n\n      for (var i = 0; i < this.circles.length; i++) {\n        var circle = this.circles[i];\n        circle.r = this.radius * this.t;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      for (var i = 0; i < this.circles.length; i++) {\n        var circle = this.circles[i];\n        this.ctx.fillStyle = \"rgb(0, 0, 0)\";\n        this.ctx.beginPath();\n        this.ctx.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);\n        this.ctx.fill();\n      }\n    }\n  }]);\n\n  return FadeStart;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/fadeStart.js?");

/***/ }),

/***/ "./src/main/game.js":
/*!**************************!*\
  !*** ./src/main/game.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _core_tool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/tool */ \"./src/core/tool.js\");\n/* harmony import */ var _core_firework__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/firework */ \"./src/core/firework.js\");\n/* harmony import */ var _fadeEnd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fadeEnd */ \"./src/main/fadeEnd.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./main */ \"./src/main/main.js\");\n/* harmony import */ var _stop__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./stop */ \"./src/main/stop.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar Game = /*#__PURE__*/function () {\n  function Game(globals) {\n    _classCallCheck(this, Game);\n\n    this.globals = globals;\n    this.vScreen = globals.vScreen;\n    this.config = globals.config;\n    this.ctx = globals.ctx;\n    this.fixLaunchPos = globals.config.fixLaunchPos;\n    this.radius = globals.config.radius;\n    this.wallS = globals.config.wallS;\n    this.yoffset = this.wallS + this.config.scorePanelH + this.config.ceilH;\n    this.nbAnimalImages = globals.config.nbAnimalImages;\n    this.name = \"game\";\n    this.currentState = \"LAUNCH\";\n    this.totalScore = 0;\n    this.explodeSoundPlay = false;\n    this.stopButton = null;\n    this.launchBubble = null;\n    this.waitingBubbles = [];\n    this.hangBubbles = [];\n    this.fallBubbles = [];\n    this.liberatedAnimals = [];\n    this.trajectory = [];\n    this.particles = [];\n    this.gameTC = {};\n    this.combo = {};\n    this.camera = {\n      x: 0,\n      y: 0,\n      stepX: 1 / 5\n    };\n    this.speed = {\n      forward: 1200,\n      fall: 500,\n      animal: 100\n    };\n    this.count = {\n      lines: 0,\n      liberatedBubbles: 0,\n      launchBubbles: 0,\n      previousHardBubble: -1,\n      minDiff: 10,\n      minNbBubbles: 3\n    };\n  }\n\n  _createClass(Game, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.globals.assets.bgMusic.currentTime = 0;\n      this.globals.assets.bgMusic.play();\n      this.gameTC = this.getGameTempoConfig(1);\n      this.initGame(3);\n      this.launchBubble = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.fixLaunchPos.x, this.fixLaunchPos.y, this.radius);\n      this.waitingBubbles[0] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.fixLaunchPos.x, this.fixLaunchPos.y + 2 * this.radius, this.radius);\n      this.waitingBubbles[1] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.fixLaunchPos.x, this.fixLaunchPos.y + 4 * this.radius, this.radius);\n      this.count.launchBubbles = 3;\n      this.count.previousHardBubble = -1;\n      this.combo = {\n        active: true,\n        acceleration: 600,\n        number: 0,\n        scale: 3,\n        x: 0,\n        y: this.vScreen.vH / 3,\n        vy: 0,\n        targetY: -this.vScreen.vH / 5\n      };\n      var stopGap = 12;\n      var x = this.vScreen.vW - this.globals.assets.imgStop.width * this.globals.scale.stop - stopGap;\n      var y = this.wallS + this.config.scorePanelH / 2 - this.globals.assets.imgStop.height * this.globals.scale.stop / 2;\n      this.stopButton = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.ImgButton(this.globals.assets.imgStop, x, y, this.globals.scale.stop);\n      this.stopButton.gap = stopGap;\n      document.addEventListener(\"pause\", function () {\n        var currentScene = _this.globals.scenes[_this.globals.scenes.length - 1];\n\n        if (currentScene.name !== \"stop\" && currentScene.name !== \"menu\" && currentScene.name !== \"gameover\") {\n          var stop = new _stop__WEBPACK_IMPORTED_MODULE_4__.Stop(_this.globals);\n          (0,_main__WEBPACK_IMPORTED_MODULE_3__.enter)(stop);\n        } else if (currentScene.name === \"gameover\") {\n          _this.globals.assets.endMusic.pause();\n        }\n      });\n      document.addEventListener(\"backbutton\", function () {\n        var currentScene = _this.globals.scenes[_this.globals.scenes.length - 1];\n\n        if (currentScene.name !== \"stop\" && currentScene.name !== \"menu\" && currentScene.name !== \"gameover\") {\n          var stop = new _stop__WEBPACK_IMPORTED_MODULE_4__.Stop(_this.globals);\n          (0,_main__WEBPACK_IMPORTED_MODULE_3__.enter)(stop);\n        } else if (currentScene.name === \"gameover\") {\n          navigator.app && navigator.app.exitApp() || device && device.exitApp();\n        }\n      }, false);\n    }\n  }, {\n    key: \"getGameTempoConfig\",\n    value: function getGameTempoConfig(n) {\n      var tc = {\n        numStep: n,\n        nbSteps: n <= 20 ? 20 - n : 0,\n        speed: 10 - 7 / Math.pow(n, 0.3) + 0.3 * Math.pow(Math.max(n - 50, 0), 1.07) / 50,\n        probaHardBall: n > 2 ? 0.05 : 0,\n        angleSpeed: 0\n      };\n      tc.angleSpeed = Math.PI * tc.speed / 12;\n      return tc;\n    }\n  }, {\n    key: \"initGame\",\n    value: function initGame(nb) {\n      for (var i = 0; i < nb; i++) {\n        var indent = void 0;\n\n        if (i === 0) {\n          indent = false;\n        } else {\n          indent = !this.hangBubbles[i - 1].indent;\n        }\n\n        var y = this.yoffset + this.radius + this.radius * Math.sqrt(3) * i;\n        var row = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.RowBubbles(y, indent);\n\n        for (var j = 0; j < this.config.nbCols; j++) {\n          var bubble = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Bubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.wallS + (indent + 1) * this.radius + j * 2 * this.radius, y, this.radius, true);\n          row.addBubble(bubble);\n        }\n\n        this.hangBubbles.push(row);\n      }\n\n      this.addBubbles();\n    }\n  }, {\n    key: \"randomLaunchBubble\",\n    value: function randomLaunchBubble(id, x, y, r) {\n      var bubble = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Bubble(id, x, y, r, true);\n      bubble.launched = false;\n      bubble.angle = -Math.PI / 2;\n      bubble.dir = 1;\n\n      if (Math.random() > 0.5) {\n        bubble.dir = -1;\n      }\n\n      return bubble;\n    }\n  }, {\n    key: \"addBubbles\",\n    value: function addBubbles() {\n      var y = this.hangBubbles[0].y - Math.sqrt(3) * this.radius;\n      var indent = !this.hangBubbles[0].indent;\n      var row = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.RowBubbles(y, indent);\n\n      for (var j = 0; j < this.config.nbCols; j++) {\n        var bubble = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Bubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.wallS + (indent + 1) * this.radius + j * 2 * this.radius, y, this.radius, false);\n        row.addBubble(bubble);\n      }\n\n      this.hangBubbles.unshift(row);\n    }\n  }, {\n    key: \"simulateTrajectory\",\n    value: function simulateTrajectory() {\n      var dt = 1 / 60;\n\n      if (this.launchBubble) {\n        this.trajectory = [];\n        var x = this.launchBubble.x;\n        var y = this.launchBubble.y;\n        var vx = this.speed.forward * Math.cos(this.launchBubble.angle);\n        var vy = this.speed.forward * Math.sin(this.launchBubble.angle);\n\n        for (var i = 0; i < this.gameTC.nbSteps; i++) {\n          x = x + vx * dt;\n          y = y + vy * dt;\n\n          if (x <= this.wallS + this.radius) {\n            var diff = this.wallS + this.radius - x;\n            x += 2 * diff;\n            vx = -vx;\n          } else if (x >= this.vScreen.vW - this.wallS - this.radius) {\n            var _diff = this.vScreen.vW - this.wallS - this.radius - x;\n\n            x += 2 * _diff;\n            vx = -vx;\n          }\n\n          this.trajectory.push({\n            x: x,\n            y: y\n          });\n\n          if (this.interceptBubble(x, y)) {\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"interceptBubble\",\n    value: function interceptBubble(x, y) {\n      for (var i = this.hangBubbles.length - 1; i >= 0; i--) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n\n          if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.distPoints)(x, y, bubble.x, bubble.y) <= 4 * this.radius * this.radius) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"launch\",\n    value: function launch() {\n      if (this.vScreen.mouseX >= 0 && this.vScreen.mouseX <= this.vScreen.vW && this.vScreen.mouseY >= 0 && this.vScreen.mouseY <= this.vScreen.vH) {\n        if (this.launchBubble) {\n          this.launchBubble.vx = this.speed.forward * Math.cos(this.launchBubble.angle);\n          this.launchBubble.vy = this.speed.forward * Math.sin(this.launchBubble.angle);\n          this.currentState = \"UPDATELAUNCHBUBBLE\";\n          this.launchBubble.launched = true;\n        }\n      }\n    }\n  }, {\n    key: \"needHardBall\",\n    value: function needHardBall() {\n      var rand = Math.random();\n\n      if (this.combo.number === 0 && rand < this.gameTC.probaHardBall) {\n        if (this.count.previousHardBubble === -1 || this.count.previousHardBubble !== -1 && this.count.launchBubbles - this.count.previousHardBubble >= this.count.minDiff) {\n          this.count.previousHardBubble = this.count.launchBubbles + 1;\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"initLaunchStage\",\n    value: function initLaunchStage() {\n      this.initCheckedBubbles();\n      this.currentState = \"LAUNCH\";\n      this.explodeSoundPlay = false;\n      this.launchBubble = this.waitingBubbles[0];\n      this.launchBubble.y -= 2 * this.radius;\n      this.launchBubble.launched = false;\n\n      if (this.launchBubble.id < 3 && !this.combo.active) {\n        this.combo.active = true;\n        this.combo.number = 0;\n      } else if (this.launchBubble.id === 3) {\n        this.combo.active = false;\n        this.combo.number = 1;\n      }\n\n      this.combo.y = this.vScreen.vH / 3;\n      this.combo.vy = 0;\n      this.waitingBubbles[0] = this.waitingBubbles[1];\n      this.waitingBubbles[0].y -= 2 * this.radius;\n      this.waitingBubbles[1] = this.randomLaunchBubble(this.needHardBall() ? 3 : (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.fixLaunchPos.x, this.fixLaunchPos.y + 4 * this.radius, this.radius);\n      this.count.launchBubbles++;\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.currentState !== \"GAMEOVER\") {\n        this.camera.x += this.camera.stepX;\n\n        if (this.camera.x >= this.vScreen.vW) {\n          this.camera.x = this.camera.x % this.globals.assets.imgTexture.width;\n        }\n\n        if (this.hangBubbles[0].y >= this.yoffset + this.radius - this.radius * Math.sqrt(3)) {\n          this.addBubbles();\n          this.count.lines++;\n\n          if (this.count.lines % (5 * this.gameTC.numStep) === 0) {\n            this.gameTC = this.getGameTempoConfig(this.gameTC.numStep + 1);\n          }\n        }\n\n        var anyDisappearBubbles = this.anyStatusBubbles(\"disappear\");\n        this.updateBubbles(dt);\n        this.updateLiberatedAnimals(dt);\n        this.updateFallBubbles(dt);\n        (0,_core_firework__WEBPACK_IMPORTED_MODULE_1__.updateParticles)(this.particles, dt);\n\n        if (this.vScreen.mouseClick && (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.isInButton)(this.vScreen.mouseX, this.vScreen.mouseY, this.stopButton)) {\n          var stop = new _stop__WEBPACK_IMPORTED_MODULE_4__.Stop(this.globals);\n          (0,_main__WEBPACK_IMPORTED_MODULE_3__.enter)(stop);\n        }\n\n        if (this.currentState === \"LAUNCH\") {\n          if (this.vScreen.mouseClick && this.vScreen.mouseX >= 0 && this.vScreen.mouseY >= this.wallS + this.config.scorePanelH && this.vScreen.mouseX <= this.vScreen.vW && this.vScreen.mouseY <= this.vScreen.vH) {\n            this.launch();\n          }\n\n          this.updateLaunchDirection(dt);\n        } else if (this.currentState === \"UPDATELAUNCHBUBBLE\") {\n          if (this.launchBubble) {\n            var color = this.globals.colors[this.launchBubble.id];\n            color = [color[0], color[1], color[2], color[3] * Math.random()];\n            var alpha = color[3];\n\n            for (var i = 0; i < 6; i++) {\n              if (Math.random() > 0.8) {\n                color = [255, 255, 255, alpha];\n              }\n\n              var particle = new _core_firework__WEBPACK_IMPORTED_MODULE_1__.Particle(this.launchBubble.x, this.launchBubble.y, 2, 0.8, \"glitter\", color);\n              this.particles.push(particle);\n            }\n\n            this.updateLaunchBubble(dt);\n          } else {\n            if (this.combo.active && this.combo.number >= 2) {\n              if (this.combo.vy === 0) {\n                this.globals.assets.pickupSound.play();\n              }\n\n              this.combo.vy += this.combo.acceleration * dt;\n              var stepY = this.combo.vy * dt;\n\n              if (this.combo.y >= this.combo.targetY + stepY) {\n                this.combo.y -= stepY;\n              } else {\n                if (!anyDisappearBubbles) {\n                  this.initLaunchStage();\n                }\n              }\n            } else {\n              if (!anyDisappearBubbles) {\n                this.initLaunchStage();\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateBubbles\",\n    value: function updateBubbles(dt) {\n      for (var i = this.hangBubbles.length - 1; i >= 0; i--) {\n        var row = this.hangBubbles[i];\n        row.y += this.gameTC.speed * dt;\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = bubbles.length - 1; j >= 0; j--) {\n          var bubble = bubbles[j];\n          bubble.aAnimationTimer -= dt;\n\n          if (bubble.aAnimationTimer <= 0) {\n            bubble.aFrameIndex++;\n            bubble.aAnimationTimer = bubble.aAnimationSpeed;\n\n            if (bubble.aFrameIndex >= 2) {\n              bubble.aFrameIndex = 0;\n            }\n          }\n\n          if (bubble.status === \"disappear\") {\n            bubble.r *= 1.015;\n            bubble.bAnimationTimer -= dt;\n\n            if (bubble.bAnimationTimer <= 0) {\n              bubble.bAnimationTimer = bubble.bAnimationSpeed;\n              bubble.bFrameIndex++;\n\n              if (this.count.liberatedBubbles >= 3 && bubble.bFrameIndex === 1 || bubble.bFrameIndex === 2) {\n                this.playPopSound();\n              } else if (this.count.liberatedBubbles >= 5 && bubble.bFrameIndex === 3) {\n                this.playPopSound();\n              } else if (this.count.liberatedBubbles >= 8 && bubble.bFrameIndex === 4) {\n                this.playPopSound();\n              } else if (this.count.liberatedBubbles >= 10 && bubble.bFrameIndex === 5) {\n                this.playPopSound();\n              }\n\n              if (bubble.bFrameIndex >= this.globals.assets.imgBubbles.length) {\n                this.totalScore += bubble.score;\n\n                if (bubble.id < 3) {\n                  if (bubble.flip) {\n                    bubble.vx = this.speed.animal + (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(10);\n                  } else {\n                    bubble.vx = -this.speed.animal - (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(10);\n                  }\n\n                  var vy = Math.floor(this.speed.animal / 10) + (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(5);\n                  bubble.vy = Math.random() > 0.5 ? vy : -vy;\n                }\n\n                this.liberatedAnimals.push(bubble);\n                bubbles.splice(j, 1);\n              }\n            }\n          }\n\n          if (bubble.y < this.yoffset + this.config.gridH) {\n            bubble.y = row.y;\n\n            if (!bubble.active && bubble.y >= this.yoffset + this.radius) {\n              bubble.active = true;\n            }\n          }\n        }\n\n        this.removeBubblesRow(i);\n\n        if (row.y + this.radius >= this.yoffset + this.config.gridH) {\n          this.currentState = \"GAMEOVER\";\n          this.globals.assets.bgMusic.pause();\n          this.globals.assets.deadSound.play();\n          var fade = new _fadeEnd__WEBPACK_IMPORTED_MODULE_2__.FadeEnd(this.globals, \"gameover\", this.totalScore);\n          (0,_main__WEBPACK_IMPORTED_MODULE_3__.enter)(fade);\n        }\n      }\n    }\n  }, {\n    key: \"updateFallBubbles\",\n    value: function updateFallBubbles(dt) {\n      for (var i = this.fallBubbles.length - 1; i >= 0; i--) {\n        var bubble = this.fallBubbles[i];\n\n        if (bubble.status === \"fall\") {\n          bubble.y += bubble.vy * dt;\n\n          if (bubble.y >= this.vScreen.vH - this.wallS - this.radius) {\n            bubble.y = this.vScreen.vH - this.wallS - this.radius;\n            bubble.vy = 0;\n            bubble.status = \"disappear\";\n            this.playPopSound();\n          }\n        } else if (bubble.status === \"disappear\") {\n          bubble.r *= 1.015;\n          bubble.bAnimationTimer -= dt;\n\n          if (bubble.bAnimationTimer <= 0) {\n            bubble.bAnimationTimer = bubble.bAnimationSpeed;\n            bubble.bFrameIndex++;\n\n            if (bubble.bFrameIndex === 1) {\n              this.playPopSound();\n            }\n\n            if (bubble.bFrameIndex >= this.globals.assets.imgBubbles.length) {\n              if (bubble.score > 0) {\n                this.totalScore += bubble.score;\n              }\n\n              if (bubble.id < 3) {\n                if (bubble.flip) {\n                  bubble.vx = this.speed.animal + (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(10);\n                } else {\n                  bubble.vx = -this.speed.animal - (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(10);\n                }\n\n                this.liberatedAnimals.push(bubble);\n              }\n\n              this.fallBubbles.splice(i, 1);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateLiberatedAnimals\",\n    value: function updateLiberatedAnimals(dt) {\n      for (var i = 0; i < this.liberatedAnimals.length; i++) {\n        var animal = this.liberatedAnimals[i];\n        animal.x += animal.vx * dt;\n        animal.y += animal.vy * dt;\n\n        if (animal.x < -animal.r + this.wallS || animal.x > this.vScreen.vW + animal.r - this.wallS) {\n          this.liberatedAnimals.splice(i, 1);\n        }\n\n        if (animal.y < this.yoffset - this.radius || animal.y > this.vScreen.vH) {\n          this.liberatedAnimals.splice(i, 1);\n        }\n\n        animal.aAnimationTimer -= dt;\n\n        if (animal.aAnimationTimer <= 0) {\n          animal.aFrameIndex += 2;\n          animal.aAnimationTimer = animal.aAnimationSpeed;\n\n          if (animal.aFrameIndex > 2) {\n            animal.aFrameIndex = 0;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateLaunchDirection\",\n    value: function updateLaunchDirection(dt) {\n      this.launchBubble.angle += this.launchBubble.dir * this.gameTC.angleSpeed * dt;\n\n      if (this.launchBubble.angle > -20 / 180 * Math.PI) {\n        this.launchBubble.angle = -20 / 180 * Math.PI;\n        this.launchBubble.dir = -1;\n      } else if (this.launchBubble.angle < -160 / 180 * Math.PI) {\n        this.launchBubble.angle = -160 / 180 * Math.PI;\n        this.launchBubble.dir = 1;\n      }\n\n      this.launchBubble.aAnimationTimer -= dt;\n\n      if (this.launchBubble.aAnimationTimer <= 0) {\n        this.launchBubble.aFrameIndex++;\n        this.launchBubble.aAnimationTimer = this.launchBubble.aAnimationSpeed;\n\n        if (this.launchBubble.aFrameIndex >= 2) {\n          this.launchBubble.aFrameIndex = 0;\n        }\n      }\n\n      this.simulateTrajectory();\n    }\n  }, {\n    key: \"updateLaunchBubble\",\n    value: function updateLaunchBubble(dt) {\n      if (this.launchBubble.status !== \"disappear\") {\n        this.launchBubble.x += this.launchBubble.vx * dt;\n        this.launchBubble.y += this.launchBubble.vy * dt;\n\n        if (this.launchBubble.x <= this.wallS + this.radius) {\n          this.playWallSound();\n          var diff = this.wallS + this.radius - this.launchBubble.x;\n          this.launchBubble.x += 2 * diff;\n          this.launchBubble.vx = -this.launchBubble.vx;\n        } else if (this.launchBubble.x >= this.vScreen.vW - this.wallS - this.radius) {\n          this.playWallSound();\n\n          var _diff2 = this.vScreen.vW - this.wallS - this.radius - this.launchBubble.x;\n\n          this.launchBubble.x += 2 * _diff2;\n          this.launchBubble.vx = -this.launchBubble.vx;\n        }\n      }\n\n      if (this.launchBubble) {\n        this.detectCollideBubble();\n      }\n    }\n  }, {\n    key: \"detectCollideBubble\",\n    value: function detectCollideBubble() {\n      var touchCeil = false;\n\n      external_loop: for (var i = this.hangBubbles.length - 1; i >= 0; i--) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n\n          if (this.launchBubble.id === 3) {\n            if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.collide)(this.launchBubble, bubble)) {\n              if (bubble.active) {\n                if (!this.explodeSoundPlay) {\n                  this.globals.assets.explodeSound.play();\n                  this.explodeSoundPlay = true;\n                }\n\n                bubble.checked = true;\n                bubble.status = \"disappear\";\n                bubble.score = 10 * this.combo.number;\n              } else {\n                this.playWallSound();\n                this.launchBubble.vx = 0;\n                this.launchBubble.vy = this.speed.fall;\n                this.launchBubble.status = \"fall\";\n                this.fallBubbles.push(this.launchBubble);\n                touchCeil = true;\n                break external_loop;\n              }\n            }\n          } else {\n            if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.collide)(this.launchBubble, bubble)) {\n              this.launchBubble.vx = 0;\n              this.launchBubble.vy = 0;\n              this.nearestNeighbor(bubble, i);\n              break external_loop;\n            }\n          }\n        }\n      }\n\n      this.count.liberatedBubbles = this.countCheckedBubbles();\n\n      if (this.launchBubble.id < this.nbAnimalImages) {\n        if (this.count.liberatedBubbles >= this.count.minNbBubbles) {\n          this.playPopSound();\n          this.combo.number++;\n          this.launchBubble = null;\n          this.disappearBubbles();\n          this.initCheckedBubbles();\n          this.findFallBubbles();\n        } else if (this.count.liberatedBubbles > 0 && this.count.liberatedBubbles < this.count.minNbBubbles) {\n          this.playDockSound();\n          this.combo.active = false;\n          this.launchBubble = null;\n        }\n      } else {\n        if (touchCeil) {\n          this.launchBubble = null;\n        }\n\n        if (this.count.liberatedBubbles > 0) {\n          this.initCheckedBubbles();\n          this.findFallBubbles();\n        }\n      }\n    }\n  }, {\n    key: \"nearestNeighbor\",\n    value: function nearestNeighbor(bubble, numRow) {\n      var res = this.sixNeighbor(bubble, numRow);\n      var sixCoords = res.coords;\n      var sixObjets = res.objets;\n      var validPosition = {};\n\n      for (var i = 0; i < 6; i++) {\n        var coord = sixCoords[i];\n\n        if (sixObjets[i] === -1 && coord[0] >= this.radius && coord[0] <= this.vScreen.vW - this.radius) {\n          validPosition[i] = coord;\n        }\n      }\n\n      var dists = {};\n\n      for (var key in validPosition) {\n        var _coord = validPosition[key];\n        var dist = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.distPoints)(_coord[0], _coord[1], this.launchBubble.x, this.launchBubble.y);\n        dists[key] = dist;\n      }\n\n      var minDist = 5 * this.radius * 5 * this.radius;\n\n      for (var _key in dists) {\n        var _dist = dists[_key];\n        minDist = Math.min(minDist, _dist);\n      }\n\n      for (var _key2 in validPosition) {\n        if (dists[_key2] === minDist) {\n          var _coord2 = validPosition[_key2];\n          this.launchBubble.x = _coord2[0];\n          this.launchBubble.y = _coord2[1];\n          var r = numRow + Math.floor(_key2 / 2) - 1;\n\n          if (r >= this.hangBubbles.length) {\n            var indent = !this.hangBubbles[this.hangBubbles.length - 1].indent;\n            var row = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.RowBubbles(this.launchBubble.y, indent);\n            row.addBubble(this.launchBubble);\n            this.hangBubbles.push(row);\n          } else {\n            var _row = this.hangBubbles[r];\n\n            _row.addBubble(this.launchBubble);\n          }\n\n          this.floodFill(this.launchBubble, r);\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"sixNeighbor\",\n    value: function sixNeighbor(bubble, numRow) {\n      var x = bubble.x;\n      var y = bubble.y;\n      var sixCoords = [[x - this.radius, y - this.radius * Math.sqrt(3)], [x + this.radius, y - this.radius * Math.sqrt(3)], [x - 2 * this.radius, y], [x + 2 * this.radius, y], [x - this.radius, y + this.radius * Math.sqrt(3)], [x + this.radius, y + this.radius * Math.sqrt(3)]];\n      var sixObjets = [-1, -1, -1, -1, -1, -1];\n\n      for (var _i = numRow - 1; _i <= numRow + 1; _i += 2) {\n        if (_i >= 0 && _i < this.hangBubbles.length) {\n          var bubbles = this.hangBubbles[_i].bubbles;\n\n          for (var j = 0; j < bubbles.length; j++) {\n            var _bubble = bubbles[j];\n\n            if (_bubble.x - x === -this.radius) {\n              sixObjets[(_i + (1 - numRow)) * 2] = _bubble;\n            } else if (_bubble.x - x === this.radius) {\n              sixObjets[(_i + (1 - numRow)) * 2 + 1] = _bubble;\n            }\n          }\n        }\n      }\n\n      var i = numRow;\n\n      if (i >= 0 && i < this.hangBubbles.length) {\n        var _bubbles = this.hangBubbles[i].bubbles;\n\n        for (var _j = 0; _j < _bubbles.length; _j++) {\n          var _bubble2 = _bubbles[_j];\n\n          if (_bubble2.x - x === -2 * this.radius) {\n            sixObjets[2] = _bubble2;\n          } else if (_bubble2.x - x === 2 * this.radius) {\n            sixObjets[3] = _bubble2;\n          }\n        }\n      }\n\n      return {\n        coords: sixCoords,\n        objets: sixObjets\n      };\n    }\n  }, {\n    key: \"anyStatusBubbles\",\n    value: function anyStatusBubbles(status) {\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n\n          if (bubble.status === status) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"initCheckedBubbles\",\n    value: function initCheckedBubbles() {\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n          bubble.checked = false;\n        }\n      }\n    }\n  }, {\n    key: \"initNotFallingCheckedBubbles\",\n    value: function initNotFallingCheckedBubbles() {\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n          bubble.notFallingChecked = false;\n        }\n      }\n    }\n  }, {\n    key: \"countCheckedBubbles\",\n    value: function countCheckedBubbles() {\n      var count = 0;\n\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n\n          if (bubble.checked) {\n            count++;\n          }\n        }\n      }\n\n      return count;\n    }\n  }, {\n    key: \"floodFill\",\n    value: function floodFill(bubble, numRow) {\n      if (bubble === -1) return;\n      if (!bubble.active) return;\n      if (bubble.id !== this.launchBubble.id) return;\n      if (bubble.checked) return;\n      bubble.checked = true;\n      var res = this.sixNeighbor(bubble, numRow);\n      var sixObjets = res.objets;\n\n      for (var i = 0; i < sixObjets.length; i++) {\n        var r = numRow + Math.floor(i / 2) - 1;\n        this.floodFill(sixObjets[i], r);\n      }\n    }\n  }, {\n    key: \"floodFillNotFalling\",\n    value: function floodFillNotFalling(bubble, numRow) {\n      if (bubble === -1) return;\n      if (bubble.status !== \"idle\") return;\n      if (bubble.notFallingChecked) return;\n      bubble.notFallingChecked = true;\n      var res = this.sixNeighbor(bubble, numRow);\n      var sixObjets = res.objets;\n\n      for (var i = 0; i < sixObjets.length; i++) {\n        var r = numRow + Math.floor(i / 2) - 1;\n        this.floodFillNotFalling(sixObjets[i], r);\n      }\n    }\n  }, {\n    key: \"findFallBubbles\",\n    value: function findFallBubbles() {\n      this.initNotFallingCheckedBubbles();\n      var bubbles = this.hangBubbles[1].bubbles;\n\n      for (var j = 0; j < bubbles.length; j++) {\n        var bubble = bubbles[j];\n        this.floodFillNotFalling(bubble, 1);\n      }\n\n      for (var i = this.hangBubbles.length - 1; i >= 0; i--) {\n        var _bubbles2 = this.hangBubbles[i].bubbles;\n\n        for (var _j2 = _bubbles2.length - 1; _j2 >= 0; _j2--) {\n          var _bubble3 = _bubbles2[_j2];\n\n          if (!_bubble3.notFallingChecked && _bubble3.status !== \"disappear\") {\n            _bubble3.status = \"fall\";\n            _bubble3.vy = this.speed.fall;\n            _bubble3.score = 10 * this.combo.number;\n            this.fallBubbles.push(_bubble3);\n\n            _bubbles2.splice(_j2, 1);\n          }\n        }\n\n        this.removeBubblesRow(i);\n      }\n\n      this.initNotFallingCheckedBubbles();\n    }\n  }, {\n    key: \"disappearBubbles\",\n    value: function disappearBubbles() {\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n\n          if (bubble.checked) {\n            bubble.status = \"disappear\";\n            bubble.score = 10 * this.combo.number;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"removeBubblesRow\",\n    value: function removeBubblesRow(r) {\n      var bubbles = this.hangBubbles[r].bubbles;\n\n      if (r === this.hangBubbles.length - 1 && bubbles.length === 0) {\n        this.hangBubbles.splice(r, 1);\n      }\n    }\n  }, {\n    key: \"playPopSound\",\n    value: function playPopSound() {\n      var rand = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.globals.assets.popSounds.length);\n      this.globals.assets.popSounds[rand].play();\n    }\n  }, {\n    key: \"playDockSound\",\n    value: function playDockSound() {\n      var rand = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.globals.assets.dockSounds.length);\n      this.globals.assets.dockSounds[rand].play();\n    }\n  }, {\n    key: \"playWallSound\",\n    value: function playWallSound() {\n      var rand = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.globals.assets.wallSounds.length);\n      this.globals.assets.wallSounds[rand].play();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.ctx.save();\n      this.ctx.translate(this.camera.x, this.camera.y);\n      this.ctx.imageSmoothingEnabled = true;\n      var pattern = this.ctx.createPattern(this.globals.assets.imgTexture, 'repeat');\n      this.ctx.fillStyle = pattern;\n      this.ctx.fillRect(-this.vScreen.vW, 0, 2 * this.vScreen.vW, this.vScreen.vH);\n      this.ctx.restore();\n      this.ctx.imageSmoothingEnabled = false;\n      this.drawHangBubbles();\n      (0,_core_firework__WEBPACK_IMPORTED_MODULE_1__.drawParticles)(this.ctx, this.particles);\n\n      if (this.combo.active && this.combo.number >= 2 && !this.launchBubble) {\n        var text = \"COMBO X\".concat(this.combo.number);\n        (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawCombo)(this.ctx, this.globals.assets.imgFont, text, this.wallS, this.combo.y, this.vScreen.vW - this.wallS, this.combo.y + this.vScreen.vH / 5, this.combo.scale);\n      }\n\n      this.ctx.globalAlpha = 0.5;\n      this.drawFallBubbles();\n      this.ctx.globalAlpha = 1;\n      this.drawLiberatedAnimals();\n      this.drawScorePanel();\n      this.drawCeil();\n      this.drawThreshold();\n      this.drawBarriers();\n      this.drawWalls();\n    }\n  }, {\n    key: \"drawHangBubbles\",\n    value: function drawHangBubbles() {\n      this.ctx.imageSmoothingEnabled = false;\n\n      for (var i = 0; i < this.hangBubbles.length; i++) {\n        var bubbles = this.hangBubbles[i].bubbles;\n\n        for (var j = 0; j < bubbles.length; j++) {\n          var bubble = bubbles[j];\n          var imgA = this.globals.assets.imgAnimals[bubble.id];\n          var imgB = this.globals.assets.imgBubbles[bubble.id][bubble.bFrameIndex];\n          bubble.draw(this.ctx, imgA, imgB, this.globals.colors[bubble.id]);\n\n          if (bubble.status === \"disappear\") {\n            this.drawScoring(bubble);\n          }\n        }\n      }\n\n      for (var _i2 = 0; _i2 < this.waitingBubbles.length; _i2++) {\n        var _bubble4 = this.waitingBubbles[_i2];\n        var _imgA = this.globals.assets.imgAnimals[_bubble4.id];\n        var _imgB = this.globals.assets.imgBubbles[_bubble4.id][_bubble4.bFrameIndex];\n\n        _bubble4.draw(this.ctx, _imgA, _imgB, this.globals.colors[_bubble4.id]);\n      }\n\n      if (this.launchBubble) {\n        var _imgA2 = this.globals.assets.imgAnimals[this.launchBubble.id];\n        var _imgB2 = this.globals.assets.imgBubbles[this.launchBubble.id][this.launchBubble.bFrameIndex];\n        this.launchBubble.draw(this.ctx, _imgA2, _imgB2, this.globals.colors[this.launchBubble.id]);\n\n        if (!this.launchBubble.launched) {\n          this.ctx.strokeStyle = \"rgb(255, 255, 0)\";\n          this.ctx.beginPath();\n          this.ctx.moveTo(this.launchBubble.x, this.launchBubble.y);\n          this.ctx.lineTo(this.launchBubble.x + Math.cos(this.launchBubble.angle) * 50, this.launchBubble.y + Math.sin(this.launchBubble.angle) * 50);\n          this.ctx.stroke();\n\n          for (var _i3 = 0; _i3 < this.trajectory.length; _i3++) {\n            var coord = this.trajectory[_i3];\n            this.ctx.beginPath();\n            this.ctx.fillStyle = \"white\";\n            this.ctx.arc(coord.x, coord.y, 3, 0, 2 * Math.PI);\n            this.ctx.fill();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"drawFallBubbles\",\n    value: function drawFallBubbles() {\n      this.ctx.imageSmoothingEnabled = false;\n\n      for (var i = 0; i < this.fallBubbles.length; i++) {\n        var bubble = this.fallBubbles[i];\n        var imgA = this.globals.assets.imgAnimals[bubble.id];\n        var imgB = this.globals.assets.imgBubbles[bubble.id][bubble.bFrameIndex];\n        bubble.draw(this.ctx, imgA, imgB, this.globals.colors[bubble.id]);\n\n        if (bubble.status === \"disappear\" && bubble.id !== 3) {\n          this.drawScoring(bubble);\n        }\n      }\n    }\n  }, {\n    key: \"drawLiberatedAnimals\",\n    value: function drawLiberatedAnimals() {\n      this.ctx.imageSmoothingEnabled = false;\n\n      for (var i = 0; i < this.liberatedAnimals.length; i++) {\n        var animal = this.liberatedAnimals[i];\n        var quad = animal.animalQuads[animal.aFrameIndex];\n        var imgA = this.globals.assets.imgAnimals[animal.id];\n\n        if (animal.flip) {\n          this.ctx.save();\n          this.ctx.translate(animal.x + animal.r, animal.y);\n          this.ctx.scale(-1, 1);\n          this.ctx.drawImage(imgA, quad.x, quad.y, quad.w, quad.h, animal.r / 2, -animal.r / 2, animal.r, animal.r);\n          this.ctx.restore();\n        } else {\n          this.ctx.drawImage(imgA, quad.x, quad.y, quad.w, quad.h, animal.x - animal.r / 2, animal.y - animal.r / 2, animal.r, animal.r);\n        }\n      }\n    }\n  }, {\n    key: \"drawWalls\",\n    value: function drawWalls() {\n      this.ctx.fillStyle = \"rgb(205, 128, 0)\";\n      this.ctx.fillRect(0, 0, this.vScreen.vW, this.wallS);\n      this.ctx.fillRect(0, 0, this.wallS, this.vScreen.vH);\n      this.ctx.fillRect(this.vScreen.vW - this.wallS, 0, this.wallS, this.vScreen.vH);\n      this.ctx.fillRect(0, this.vScreen.vH - this.wallS, this.vScreen.vW / 2 - this.radius, this.wallS);\n      this.ctx.fillRect(this.vScreen.vW / 2 + this.radius, this.vScreen.vH - this.wallS, this.vScreen.vW / 2 - this.radius, this.wallS);\n    }\n  }, {\n    key: \"drawScorePanel\",\n    value: function drawScorePanel() {\n      this.ctx.fillStyle = \"rgba(20, 50, 20, 1)\";\n      this.ctx.fillRect(this.wallS, this.wallS, this.vScreen.vW - 2 * this.wallS, this.config.scorePanelH);\n      var newScaleFont = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawScore)(this.ctx, this.globals.assets.imgFont, this.totalScore, this.wallS, this.wallS, this.vScreen.vW - this.wallS, this.wallS + this.config.scorePanelH, this.globals.scale.score, this.stopButton.gap);\n      this.stopButton.scale = newScaleFont;\n      this.stopButton.w = this.stopButton.img.width * this.stopButton.scale;\n      this.stopButton.h = this.stopButton.img.height * this.stopButton.scale;\n      this.stopButton.x = this.vScreen.vW - this.wallS - this.stopButton.w - this.stopButton.gap;\n      this.stopButton.y = this.wallS + this.config.scorePanelH / 2 - this.stopButton.h / 2;\n      this.stopButton.draw(this.ctx);\n    }\n  }, {\n    key: \"drawCeil\",\n    value: function drawCeil() {\n      this.ctx.fillStyle = \"rgb(205, 128, 0)\";\n      this.ctx.fillRect(0, this.wallS + this.config.scorePanelH, this.vScreen.vW, this.config.ceilH);\n    }\n  }, {\n    key: \"drawThreshold\",\n    value: function drawThreshold() {\n      this.ctx.fillStyle = \"rgb(200, 40, 150)\";\n      this.ctx.fillRect(0, this.yoffset + this.config.gridH, this.vScreen.vW, this.config.thresholdH);\n    }\n  }, {\n    key: \"drawBarriers\",\n    value: function drawBarriers() {\n      this.ctx.fillStyle = \"rgb(205, 128, 0)\";\n      var y = this.fixLaunchPos.y + this.radius * 2 / 3;\n      var groundW = (this.vScreen.vW - 2 * this.radius) / 2;\n      this.ctx.fillRect(groundW - this.config.barrierW, y, this.config.barrierW, 4 * this.radius + this.radius * 1 / 3);\n      this.ctx.fillRect(groundW + 2 * this.radius, y, this.config.barrierW, 4 * this.radius + this.radius * 1 / 3);\n    }\n  }, {\n    key: \"drawScoring\",\n    value: function drawScoring(bubble) {\n      this.ctx.font = \"14px Arial\";\n      var text = bubble.score;\n      var w = this.ctx.measureText(text).width;\n      var h = this.ctx.measureText(\"M\").width;\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawText)(this.ctx, text, \"CENTER\", [0, 0, 0], \"14px Arial\", bubble.x - w / 2 - 2, bubble.y - this.radius, w, h);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawText)(this.ctx, text, \"CENTER\", [0, 0, 0], \"14px Arial\", bubble.x - w / 2, bubble.y - this.radius - 2, w, h);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawText)(this.ctx, text, \"CENTER\", [0, 0, 0], \"14px Arial\", bubble.x - w / 2 + 2, bubble.y - this.radius, w, h);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawText)(this.ctx, text, \"CENTER\", [0, 0, 0], \"14px Arial\", bubble.x - w / 2, bubble.y - this.radius + 2, w, h);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawText)(this.ctx, text, \"CENTER\", [205, 128, 0], \"14px Arial\", bubble.x - w / 2, bubble.y - this.radius, w, h);\n    }\n  }]);\n\n  return Game;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/game.js?");

/***/ }),

/***/ "./src/main/gameover.js":
/*!******************************!*\
  !*** ./src/main/gameover.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Gameover\": () => (/* binding */ Gameover)\n/* harmony export */ });\n/* harmony import */ var _core_tool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/tool */ \"./src/core/tool.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main */ \"./src/main/main.js\");\n/* harmony import */ var _fadeEnd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fadeEnd */ \"./src/main/fadeEnd.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar Gameover = /*#__PURE__*/function () {\n  function Gameover(globals, score) {\n    _classCallCheck(this, Gameover);\n\n    this.globals = globals;\n    this.ctx = globals.ctx;\n    this.config = globals.config;\n    this.vScreen = globals.vScreen;\n    this.radius = this.config.radius;\n    this.score = score;\n    this.bubbles = [];\n    this.waitingBubbles = [];\n    this.launchBubble = null;\n    this.playButton = null;\n    this.nbAnimalImages = globals.config.nbAnimalImages;\n    this.generate = {\n      active: true,\n      maxTime: 0.5,\n      timer: 0.5\n    };\n    this.launch = {\n      maxTime: 2,\n      timer: 2,\n      velocity: 200\n    };\n  }\n\n  _createClass(Gameover, [{\n    key: \"init\",\n    value: function init() {\n      this.playButton = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Button(this.globals.assets.imgFont, \"RETRY\", 0, this.vScreen.vH / 2, this.vScreen.vW, 100, this.globals.scale.title, [255, 153, 0, 0.7]);\n      this.launch.timer = this.launch.maxTime * Math.random();\n      this.launchBubble = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y, this.radius);\n      this.waitingBubbles[0] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 2 * this.radius, this.radius);\n      this.waitingBubbles[1] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 4 * this.radius, this.radius);\n    }\n  }, {\n    key: \"randomLaunchBubble\",\n    value: function randomLaunchBubble(id, x, y, r) {\n      var bubble = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Bubble(id, x, y, r, true);\n      bubble.launched = false;\n      bubble.angle = -Math.PI / 2;\n      bubble.dir = 1;\n\n      if (Math.random() > 0.5) {\n        bubble.dir = -1;\n      }\n\n      return bubble;\n    }\n  }, {\n    key: \"initLaunchStage\",\n    value: function initLaunchStage() {\n      this.launch.timer = this.launch.maxTime * Math.random();\n      this.launchBubble = this.waitingBubbles[0];\n      this.launchBubble.y -= 2 * this.radius;\n      this.launchBubble.launched = false;\n      this.waitingBubbles[0] = this.waitingBubbles[1];\n      this.waitingBubbles[0].y -= 2 * this.radius;\n      this.waitingBubbles[1] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 4 * this.radius, this.radius);\n    }\n  }, {\n    key: \"automaticLaunch\",\n    value: function automaticLaunch() {\n      if (this.launchBubble) {\n        this.launchBubble.vx = this.launch.velocity * Math.cos(this.launchBubble.angle);\n        this.launchBubble.vy = this.launch.velocity * Math.sin(this.launchBubble.angle);\n        this.bubbles.push(this.launchBubble);\n        this.launchBubble = null;\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.isInButton)(this.vScreen.mouseX, this.vScreen.mouseY, this.playButton)) {\n        this.vScreen.mouseClick = false;\n        var fade = new _fadeEnd__WEBPACK_IMPORTED_MODULE_2__.FadeEnd(this.globals, \"game\", 0);\n        (0,_main__WEBPACK_IMPORTED_MODULE_1__.enter)(fade);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.vScreen.mouseClick) {\n        this.play();\n      }\n\n      if (!this.generate.active) {\n        this.generate.timer -= dt;\n\n        if (this.generate.timer <= 0) {\n          this.initLaunchStage();\n          this.generate.timer = this.generate.maxTime;\n          this.generate.active = true;\n        }\n      } else {\n        this.launch.timer -= dt;\n\n        if (this.launch.timer <= 0) {\n          this.automaticLaunch();\n          this.generate.active = false;\n        }\n      }\n\n      if (this.launchBubble) {\n        this.updateLaunchDirection(dt);\n      }\n\n      this.updateBubbles(dt);\n    }\n  }, {\n    key: \"updateLaunchDirection\",\n    value: function updateLaunchDirection(dt) {\n      this.launchBubble.angle += this.launchBubble.dir * Math.PI * 1 / 4 * dt;\n\n      if (this.launchBubble.angle > -20 / 180 * Math.PI) {\n        this.launchBubble.angle = -20 / 180 * Math.PI;\n        this.launchBubble.dir = -1;\n      } else if (this.launchBubble.angle < -160 / 180 * Math.PI) {\n        this.launchBubble.angle = -160 / 180 * Math.PI;\n        this.launchBubble.dir = 1;\n      }\n\n      this.launchBubble.animationTimer -= dt;\n\n      if (this.launchBubble.animationTimer <= 0) {\n        this.launchBubble.frameIndex++;\n        this.launchBubble.animationTimer = this.launchBubble.animationSpeed;\n\n        if (this.launchBubble.frameIndex >= 2) {\n          this.launchBubble.frameIndex = 0;\n        }\n      }\n    }\n  }, {\n    key: \"updateBubbles\",\n    value: function updateBubbles(dt) {\n      for (var i = this.bubbles.length - 1; i >= 0; i--) {\n        var bubble = this.bubbles[i];\n        bubble.animationTimer -= dt;\n\n        if (bubble.animationTimer <= 0) {\n          bubble.frameIndex++;\n          bubble.animationTimer = bubble.animationSpeed;\n\n          if (bubble.frameIndex >= 2) {\n            bubble.frameIndex = 0;\n          }\n        }\n\n        bubble.x += bubble.vx * dt;\n        bubble.y += bubble.vy * dt;\n\n        if (bubble.x <= this.radius) {\n          var diff = this.radius - bubble.x;\n          bubble.x += 2 * diff;\n          bubble.vx = -bubble.vx;\n        } else if (bubble.x >= this.vScreen.vW - this.radius) {\n          var _diff = this.vScreen.vW - this.radius - bubble.x;\n\n          bubble.x += 2 * _diff;\n          bubble.vx = -bubble.vx;\n        }\n\n        if (bubble.y <= -this.radius) {\n          this.bubbles.splice(i, 1);\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.ctx.imageSmoothingEnabled = false;\n      var pattern = this.ctx.createPattern(this.globals.assets.imgTexture, 'repeat');\n      this.ctx.fillStyle = pattern;\n      this.ctx.fillRect(0, 0, this.vScreen.vW, this.vScreen.vH);\n      this.ctx.imageSmoothingEnabled = false;\n      this.globals.scale.title = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawTitle)(this.ctx, \"GAME\", this.globals.assets.imgFont, 0, this.vScreen.vH * 0.5 / 6, this.vScreen.vW, this.vScreen.vH * 1 / 6, this.globals.scale.title);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawTitle)(this.ctx, \"OVER\", this.globals.assets.imgFont, 0, this.vScreen.vH * 1 / 6, this.vScreen.vW, this.vScreen.vH * 1.5 / 6, this.globals.scale.title);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawTitle)(this.ctx, \"SCORE:\" + this.score, this.globals.assets.imgFont, 0, this.vScreen.vH * 1.5 / 6, this.vScreen.vW, this.vScreen.vH / 2, this.globals.scale.title * 0.8);\n      this.playButton.scale = this.globals.scale.title;\n      this.playButton.draw(this.ctx);\n      this.drawBubbles();\n      this.drawBarriers();\n    }\n  }, {\n    key: \"drawBarriers\",\n    value: function drawBarriers() {\n      this.ctx.fillStyle = \"rgb(205, 128, 0)\";\n      var y = this.vScreen.vH - 4 * this.radius - 1 / 3 * this.radius;\n      this.ctx.fillRect(this.config.fixLaunchPos.x - this.radius - this.config.barrierW, y, this.config.barrierW, 4 * this.radius + 1 / 3 * this.radius);\n      this.ctx.fillRect(this.config.fixLaunchPos.x + this.radius, y, this.config.barrierW, 4 * this.radius + 1 / 3 * this.radius);\n    }\n  }, {\n    key: \"drawBubbles\",\n    value: function drawBubbles() {\n      this.ctx.imageSmoothingEnabled = false;\n\n      for (var i = 0; i < this.bubbles.length; i++) {\n        var bubble = this.bubbles[i];\n        var imgA = this.globals.assets.imgAnimals[bubble.id];\n        var imgB = this.globals.assets.imgBubbles[bubble.id][bubble.bFrameIndex];\n        bubble.draw(this.ctx, imgA, imgB, this.globals.colors[bubble.id]);\n      }\n\n      for (var _i = 0; _i < this.waitingBubbles.length; _i++) {\n        var _bubble = this.waitingBubbles[_i];\n        var _imgA = this.globals.assets.imgAnimals[_bubble.id];\n        var _imgB = this.globals.assets.imgBubbles[_bubble.id][_bubble.bFrameIndex];\n\n        _bubble.draw(this.ctx, _imgA, _imgB, this.globals.colors[_bubble.id]);\n      }\n\n      if (this.launchBubble) {\n        var _imgA2 = this.globals.assets.imgAnimals[this.launchBubble.id];\n        var _imgB2 = this.globals.assets.imgBubbles[this.launchBubble.id][this.launchBubble.bFrameIndex];\n        this.launchBubble.draw(this.ctx, _imgA2, _imgB2, this.globals.colors[this.launchBubble.id]);\n\n        if (!this.launchBubble.launched) {\n          this.ctx.strokeStyle = \"rgb(255, 255, 0)\";\n          this.ctx.lineWidth = 4;\n          this.ctx.beginPath();\n          this.ctx.moveTo(this.launchBubble.x, this.launchBubble.y);\n          this.ctx.lineTo(this.launchBubble.x + Math.cos(this.launchBubble.angle) * 50, this.launchBubble.y + Math.sin(this.launchBubble.angle) * 50);\n          this.ctx.stroke();\n        }\n      }\n    }\n  }]);\n\n  return Gameover;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/gameover.js?");

/***/ }),

/***/ "./src/main/loader.js":
/*!****************************!*\
  !*** ./src/main/loader.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Load\": () => (/* binding */ Load)\n/* harmony export */ });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main/main.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar Load = /*#__PURE__*/function () {\n  function Load(assets, nbAssets, nbBubbleImages) {\n    _classCallCheck(this, Load);\n\n    this.assets = assets;\n    this.nbAssets = nbAssets;\n    this.nbBubbleImages = nbBubbleImages;\n  }\n\n  _createClass(Load, [{\n    key: \"loader\",\n    value: function loader() {\n      this.loadImages();\n      this.loadSounds();\n    }\n  }, {\n    key: \"loadImages\",\n    value: function loadImages() {\n      for (var i = 0; i < this.assets.imgAnimals.length; i++) {\n        var src = \"images/img\" + i + \".png\";\n        this.assets.imgAnimals[i] = this.loadImage(src);\n      }\n\n      for (var _i = 0; _i < this.assets.imgBubbles.length; _i++) {\n        this.assets.imgBubbles[_i] = new Array(this.nbBubbleImages);\n\n        for (var j = 0; j < this.nbBubbleImages; j++) {\n          var _src = \"images/\".concat(_i, \"/imgBubble\").concat(j, \".png\");\n\n          this.assets.imgBubbles[_i][j] = this.loadImage(_src);\n        }\n      }\n\n      this.assets.imgFont = this.loadImage(\"images/imgFont.png\");\n      this.assets.imgStop = this.loadImage(\"images/imgStop.png\");\n      this.assets.imgPlay = this.loadImage(\"images/imgPlay.png\");\n      this.assets.imgTexture = this.loadImage(\"images/imgTexture.png\");\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(src) {\n      var img = new Image();\n      img.src = src;\n      img.onload = this.counter();\n      return img;\n    }\n  }, {\n    key: \"loadSounds\",\n    value: function loadSounds() {\n      for (var i = 0; i < this.assets.popSounds.length; i++) {\n        var src = \"sounds/pop\" + i + \".wav\";\n        this.assets.popSounds[i] = this.loadSound(src);\n        this.assets.popSounds[i].volume = 0.6;\n      }\n\n      for (var _i2 = 0; _i2 < this.assets.dockSounds.length; _i2++) {\n        var _src2 = \"sounds/dock\" + _i2 + \".wav\";\n\n        this.assets.dockSounds[_i2] = this.loadSound(_src2);\n      }\n\n      for (var _i3 = 0; _i3 < this.assets.wallSounds.length; _i3++) {\n        var _src3 = \"sounds/wall\" + _i3 + \".wav\";\n\n        this.assets.wallSounds[_i3] = this.loadSound(_src3);\n      }\n\n      this.assets.bgMusic = this.loadSound(\"sounds/bgMusic.mp3\");\n      this.assets.bgMusic.loop = true;\n      this.assets.bgMusic.volume = 0.3;\n      this.assets.deadSound = this.loadSound(\"sounds/dead.wav\");\n      this.assets.pickupSound = this.loadSound(\"sounds/pickup.wav\");\n      this.assets.pickupSound.volume = 0.3;\n      this.assets.explodeSound = this.loadSound(\"sounds/explosion.wav\");\n    }\n  }, {\n    key: \"loadSound\",\n    value: function loadSound(src) {\n      var sound = new Audio();\n      sound.src = src;\n      sound.addEventListener('canplaythrough', this.counter(), false);\n      return sound;\n    }\n  }, {\n    key: \"counter\",\n    value: function counter() {\n      this.nbAssets--;\n\n      if (this.nbAssets === 0) {\n        requestAnimationFrame(_main__WEBPACK_IMPORTED_MODULE_0__.gameLoop);\n      }\n    }\n  }]);\n\n  return Load;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/loader.js?");

/***/ }),

/***/ "./src/main/main.js":
/*!**************************!*\
  !*** ./src/main/main.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"enter\": () => (/* binding */ enter),\n/* harmony export */   \"gameLoop\": () => (/* binding */ gameLoop),\n/* harmony export */   \"Main\": () => (/* binding */ Main)\n/* harmony export */ });\n/* harmony import */ var _menu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./menu */ \"./src/main/menu.js\");\n/* harmony import */ var _core_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/tool */ \"./src/core/tool.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loader */ \"./src/main/loader.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar nbAnimalImages = 3;\nvar nbBubbleImages = 7;\nvar nbPopSounds = 7;\nvar nbDockSounds = 3;\nvar nbWallSounds = 2;\nvar nbRows = 15;\nvar nbCols = 8;\nvar radius = 16;\nvar gridH = nbRows * radius * Math.sqrt(3);\nvar gridW = nbCols * 2 * radius + radius;\nvar scorePanelH = 48;\nvar can = document.querySelector(\"canvas\");\nvar ctx = can.getContext(\"2d\");\nvar ceilH = 10;\nvar barrierW = 10;\nvar wallS = 10;\nvar thresholdH = 8;\nvar alpha = 0.7;\nvar vsWidth = gridW + 2 * wallS;\nvar vsHeight = wallS + scorePanelH + ceilH + gridH + radius * Math.sqrt(3) + 6 * radius + wallS;\nvar realWidth = document.body.clientWidth;\nvar realHeight = document.body.clientHeight;\ncan.width = realWidth;\ncan.height = realHeight;\nvar vScreen = new _core_tool__WEBPACK_IMPORTED_MODULE_1__.VirtualScreen(ctx, vsWidth, vsHeight, realWidth, realHeight);\nvScreen.setStrategy();\nvar fixLaunchPos = {\n  x: vScreen.vW / 2,\n  y: vScreen.vH - 5 * radius\n};\n\nvar touch = function touch(e) {\n  vScreen.mouseX = (e.touches[0].clientX - vScreen.xoffset) / vScreen.xScale;\n  vScreen.mouseY = (e.touches[0].clientY - vScreen.yoffset) / vScreen.yScale;\n};\n\nvar mouse = function mouse(e) {\n  vScreen.mouseX = (e.clientX - vScreen.xoffset) / vScreen.xScale;\n  vScreen.mouseY = (e.clientY - vScreen.yoffset) / vScreen.yScale;\n};\n\ncan.addEventListener(\"touchstart\", function (e) {\n  vScreen.mouseClick = true;\n  touch(e);\n}, false);\ncan.addEventListener(\"mousedown\", function (e) {\n  vScreen.mouseClick = true;\n  mouse(e);\n});\ncan.addEventListener(\"touchmove\", function (e) {\n  vScreen.mouseClick = false;\n}, false);\ncan.addEventListener(\"touchend\", function (e) {\n  vScreen.mouseClick = false;\n}, false);\ncan.addEventListener(\"mouseup\", function (e) {\n  vScreen.mouseClick = false;\n});\nvar nbAssets = nbAnimalImages + (nbAnimalImages + 1) * nbBubbleImages + nbPopSounds + nbDockSounds + nbWallSounds + 8;\nvar oldTime = 0;\nvar globals = {\n  scenes: [],\n  ctx: ctx,\n  assets: {\n    imgAnimals: new Array(nbAnimalImages),\n    imgBubbles: new Array(nbAnimalImages + 1),\n    imgFont: null,\n    imgStop: null,\n    imgPlay: null,\n    imgTexture: null,\n    bgMusic: null,\n    deadSound: null,\n    popSounds: new Array(nbPopSounds),\n    dockSounds: new Array(nbDockSounds),\n    wallSounds: new Array(nbWallSounds),\n    pickupSound: null,\n    explodeSound: null\n  },\n  config: {\n    nbAnimalImages: nbAnimalImages,\n    nbRows: nbRows,\n    nbCols: nbCols,\n    gridH: gridH,\n    radius: radius,\n    scorePanelH: scorePanelH,\n    ceilH: ceilH,\n    barrierW: barrierW,\n    wallS: wallS,\n    thresholdH: thresholdH,\n    fixLaunchPos: fixLaunchPos\n  },\n  vScreen: vScreen,\n  colors: [[0, 197, 255, alpha], [255, 50, 50, alpha], [131, 224, 76, alpha], [0, 0, 0, 1]],\n  scale: {\n    title: 3,\n    score: 1.5,\n    stop: 2\n  }\n};\nvar enter = function enter(s) {\n  globals.scenes.push(s);\n  s.init();\n};\nvar gameLoop = function gameLoop(time) {\n  if (oldTime === 0) {\n    var menu = new _menu__WEBPACK_IMPORTED_MODULE_0__.Menu(globals);\n    enter(menu);\n  }\n\n  var dt = (time - oldTime) / 1000;\n\n  if (dt >= 5 / 60 && globals.scenes[globals.scenes.length - 1].name === \"game\") {\n    dt = 2 / 60;\n  }\n\n  while (dt >= 1 / 60 + 0.005) {\n    globals.scenes[globals.scenes.length - 1].update(1 / 60);\n    dt -= 1 / 60;\n  }\n\n  globals.scenes[globals.scenes.length - 1].update(dt);\n  globals.vScreen.mouseClick = false;\n  ctx.clearRect(0, 0, globals.vScreen.dW, globals.vScreen.dH);\n\n  for (var i = 0; i < globals.scenes.length; i++) {\n    var scene = globals.scenes[i];\n    globals.ctx.save();\n    globals.vScreen.transform();\n    scene.draw();\n    globals.ctx.restore();\n  }\n\n  ctx.clearRect(0, 0, globals.vScreen.xoffset, globals.vScreen.dH);\n  ctx.clearRect(0, 0, globals.vScreen.dW, globals.vScreen.yoffset);\n  ctx.clearRect(globals.vScreen.dW - globals.vScreen.xoffset, 0, globals.vScreen.xoffset, globals.vScreen.dH);\n  ctx.clearRect(0, globals.vScreen.dH - globals.vScreen.yoffset, globals.vScreen.dW, globals.vScreen.yoffset);\n  oldTime = time;\n  requestAnimationFrame(gameLoop);\n};\nvar Main = /*#__PURE__*/function () {\n  function Main() {\n    _classCallCheck(this, Main);\n  }\n\n  _createClass(Main, [{\n    key: \"start\",\n    value: function start() {\n      var load = new _loader__WEBPACK_IMPORTED_MODULE_2__.Load(globals.assets, nbAssets, nbBubbleImages);\n      load.loader();\n    }\n  }]);\n\n  return Main;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/main.js?");

/***/ }),

/***/ "./src/main/menu.js":
/*!**************************!*\
  !*** ./src/main/menu.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Menu\": () => (/* binding */ Menu)\n/* harmony export */ });\n/* harmony import */ var _core_tool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/tool */ \"./src/core/tool.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main */ \"./src/main/main.js\");\n/* harmony import */ var _fadeStart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fadeStart */ \"./src/main/fadeStart.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar Menu = /*#__PURE__*/function () {\n  function Menu(globals) {\n    _classCallCheck(this, Menu);\n\n    this.globals = globals;\n    this.name = \"menu\";\n    this.ctx = globals.ctx;\n    this.config = globals.config;\n    this.vScreen = globals.vScreen;\n    this.radius = globals.config.radius;\n    this.bubbles = [];\n    this.waitingBubbles = [];\n    this.launchBubble = null;\n    this.playButton = null;\n    this.nbAnimalImages = globals.config.nbAnimalImages;\n    this.generate = {\n      active: true,\n      maxTime: 0.5,\n      timer: 0.5\n    };\n    this.launch = {\n      maxTime: 2,\n      timer: 2,\n      velocity: 200\n    };\n  }\n\n  _createClass(Menu, [{\n    key: \"init\",\n    value: function init() {\n      this.playButton = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Button(this.globals.assets.imgFont, \"PLAY\", 0, this.vScreen.vH / 2, this.vScreen.vW, 100, this.globals.scale.title, [255, 153, 0, 0.7]);\n      this.launch.timer = this.launch.maxTime * Math.random();\n      this.launchBubble = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y, this.radius);\n      this.waitingBubbles[0] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 2 * this.radius, this.radius);\n      this.waitingBubbles[1] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 4 * this.radius, this.radius);\n    }\n  }, {\n    key: \"randomLaunchBubble\",\n    value: function randomLaunchBubble(id, x, y, r) {\n      var bubble = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.Bubble(id, x, y, r, true);\n      bubble.launched = false;\n      bubble.angle = -Math.PI / 2;\n      bubble.dir = 1;\n\n      if (Math.random() > 0.5) {\n        bubble.dir = -1;\n      }\n\n      return bubble;\n    }\n  }, {\n    key: \"initLaunchStage\",\n    value: function initLaunchStage() {\n      this.launch.timer = this.launch.maxTime * Math.random();\n      this.launchBubble = this.waitingBubbles[0];\n      this.launchBubble.y -= 2 * this.radius;\n      this.launchBubble.launched = false;\n      this.waitingBubbles[0] = this.waitingBubbles[1];\n      this.waitingBubbles[0].y -= 2 * this.radius;\n      this.waitingBubbles[1] = this.randomLaunchBubble((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.randomInt)(this.nbAnimalImages), this.config.fixLaunchPos.x, this.config.fixLaunchPos.y + 4 * this.radius, this.radius);\n    }\n  }, {\n    key: \"automaticLaunch\",\n    value: function automaticLaunch() {\n      if (this.launchBubble) {\n        this.launchBubble.vx = this.launch.velocity * Math.cos(this.launchBubble.angle);\n        this.launchBubble.vy = this.launch.velocity * Math.sin(this.launchBubble.angle);\n        this.bubbles.push(this.launchBubble);\n        this.launchBubble = null;\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.isInButton)(this.vScreen.mouseX, this.vScreen.mouseY, this.playButton)) {\n        this.vScreen.mouseClick = false;\n        var fade = new _fadeStart__WEBPACK_IMPORTED_MODULE_2__.FadeStart(this.globals);\n        (0,_main__WEBPACK_IMPORTED_MODULE_1__.enter)(fade);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.vScreen.mouseClick) {\n        this.play();\n      }\n\n      if (!this.generate.active) {\n        this.generate.timer -= dt;\n\n        if (this.generate.timer <= 0) {\n          this.initLaunchStage();\n          this.generate.timer = this.generate.maxTime;\n          this.generate.active = true;\n        }\n      } else {\n        this.launch.timer -= dt;\n\n        if (this.launch.timer <= 0) {\n          this.automaticLaunch();\n          this.generate.active = false;\n        }\n      }\n\n      if (this.launchBubble) {\n        this.updateLaunchDirection(dt);\n      }\n\n      this.updateBubbles(dt);\n    }\n  }, {\n    key: \"updateLaunchDirection\",\n    value: function updateLaunchDirection(dt) {\n      this.launchBubble.angle += this.launchBubble.dir * Math.PI * 1 / 4 * dt;\n\n      if (this.launchBubble.angle > -20 / 180 * Math.PI) {\n        this.launchBubble.angle = -20 / 180 * Math.PI;\n        this.launchBubble.dir = -1;\n      } else if (this.launchBubble.angle < -160 / 180 * Math.PI) {\n        this.launchBubble.angle = -160 / 180 * Math.PI;\n        this.launchBubble.dir = 1;\n      }\n\n      this.launchBubble.animationTimer -= dt;\n\n      if (this.launchBubble.animationTimer <= 0) {\n        this.launchBubble.frameIndex++;\n        this.launchBubble.animationTimer = this.launchBubble.animationSpeed;\n\n        if (this.launchBubble.frameIndex >= 2) {\n          this.launchBubble.frameIndex = 0;\n        }\n      }\n    }\n  }, {\n    key: \"updateBubbles\",\n    value: function updateBubbles(dt) {\n      for (var i = this.bubbles.length - 1; i >= 0; i--) {\n        var bubble = this.bubbles[i];\n        bubble.animationTimer -= dt;\n\n        if (bubble.animationTimer <= 0) {\n          bubble.frameIndex++;\n          bubble.animationTimer = bubble.animationSpeed;\n\n          if (bubble.frameIndex >= 2) {\n            bubble.frameIndex = 0;\n          }\n        }\n\n        bubble.x += bubble.vx * dt;\n        bubble.y += bubble.vy * dt;\n\n        if (bubble.x <= this.radius) {\n          var diff = this.radius - bubble.x;\n          bubble.x += 2 * diff;\n          bubble.vx = -bubble.vx;\n        } else if (bubble.x >= this.vScreen.vW - this.radius) {\n          var _diff = this.vScreen.vW - this.radius - bubble.x;\n\n          bubble.x += 2 * _diff;\n          bubble.vx = -bubble.vx;\n        }\n\n        if (bubble.y <= -this.radius) {\n          this.bubbles.splice(i, 1);\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.ctx.imageSmoothingEnabled = false;\n      var pattern = this.ctx.createPattern(this.globals.assets.imgTexture, 'repeat');\n      this.ctx.fillStyle = pattern;\n      this.ctx.fillRect(0, 0, this.vScreen.vW, this.vScreen.vH);\n      this.ctx.imageSmoothingEnabled = false;\n      this.globals.scale.title = (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawTitle)(this.ctx, \"BUBBLE\", this.globals.assets.imgFont, 0, this.vScreen.vH / 6, this.vScreen.vW, this.vScreen.vH * 1.5 / 6, this.globals.scale.title);\n      (0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.drawTitle)(this.ctx, \"ANIMALS\", this.globals.assets.imgFont, 0, this.vScreen.vH * 1.5 / 6, this.vScreen.vW, this.vScreen.vH / 3, this.globals.scale.title);\n      this.playButton.scale = this.globals.scale.title;\n      this.playButton.draw(this.ctx);\n      this.drawBubbles();\n      this.drawBarriers();\n    }\n  }, {\n    key: \"drawBarriers\",\n    value: function drawBarriers() {\n      this.ctx.fillStyle = \"rgb(205, 128, 0)\";\n      var y = this.vScreen.vH - 4 * this.radius - 1 / 3 * this.radius;\n      this.ctx.fillRect(this.config.fixLaunchPos.x - this.radius - this.config.barrierW, y, this.config.barrierW, 4 * this.radius + 1 / 3 * this.radius);\n      this.ctx.fillRect(this.config.fixLaunchPos.x + this.radius, y, this.config.barrierW, 4 * this.radius + 1 / 3 * this.radius);\n    }\n  }, {\n    key: \"drawBubbles\",\n    value: function drawBubbles() {\n      this.ctx.imageSmoothingEnabled = false;\n\n      for (var i = 0; i < this.bubbles.length; i++) {\n        var bubble = this.bubbles[i];\n        var imgA = this.globals.assets.imgAnimals[bubble.id];\n        var imgB = this.globals.assets.imgBubbles[bubble.id][bubble.bFrameIndex];\n        bubble.draw(this.ctx, imgA, imgB, this.globals.colors[bubble.id]);\n      }\n\n      for (var _i = 0; _i < this.waitingBubbles.length; _i++) {\n        var _bubble = this.waitingBubbles[_i];\n        var _imgA = this.globals.assets.imgAnimals[_bubble.id];\n        var _imgB = this.globals.assets.imgBubbles[_bubble.id][_bubble.bFrameIndex];\n\n        _bubble.draw(this.ctx, _imgA, _imgB, this.globals.colors[_bubble.id]);\n      }\n\n      if (this.launchBubble) {\n        var _imgA2 = this.globals.assets.imgAnimals[this.launchBubble.id];\n        var _imgB2 = this.globals.assets.imgBubbles[this.launchBubble.id][this.launchBubble.bFrameIndex];\n        this.launchBubble.draw(this.ctx, _imgA2, _imgB2, this.globals.colors[this.launchBubble.id]);\n\n        if (!this.launchBubble.launched) {\n          this.ctx.strokeStyle = \"rgb(255, 255, 0)\";\n          this.ctx.lineWidth = 4;\n          this.ctx.beginPath();\n          this.ctx.moveTo(this.launchBubble.x, this.launchBubble.y);\n          this.ctx.lineTo(this.launchBubble.x + Math.cos(this.launchBubble.angle) * 50, this.launchBubble.y + Math.sin(this.launchBubble.angle) * 50);\n          this.ctx.stroke();\n        }\n      }\n    }\n  }]);\n\n  return Menu;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/menu.js?");

/***/ }),

/***/ "./src/main/stop.js":
/*!**************************!*\
  !*** ./src/main/stop.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Stop\": () => (/* binding */ Stop)\n/* harmony export */ });\n/* harmony import */ var _core_tool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/tool */ \"./src/core/tool.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar Stop = /*#__PURE__*/function () {\n  function Stop(globals) {\n    _classCallCheck(this, Stop);\n\n    this.globals = globals;\n    this.name = \"stop\";\n    this.vScreen = globals.vScreen;\n    this.ctx = globals.ctx;\n    this.playButton = null;\n  }\n\n  _createClass(Stop, [{\n    key: \"init\",\n    value: function init() {\n      this.globals.assets.bgMusic.pause();\n      var img = this.globals.assets.imgPlay;\n      var scalePlay = Math.floor(5 * this.globals.scale.title);\n      var x = this.vScreen.vW / 2 - img.width * scalePlay / 2;\n      var y = this.vScreen.vH / 2 - img.height * scalePlay / 2;\n      this.playButton = new _core_tool__WEBPACK_IMPORTED_MODULE_0__.ImgButton(img, x, y, scalePlay);\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      if (this.vScreen.mouseClick) {\n        if ((0,_core_tool__WEBPACK_IMPORTED_MODULE_0__.isInButton)(this.vScreen.mouseX, this.vScreen.mouseY, this.playButton)) {\n          this.vScreen.mouseClick = false;\n          this.globals.scenes.pop();\n          this.globals.assets.bgMusic.play();\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.ctx.fillStyle = \"rgba(0, 0, 0, 0.8)\";\n      this.ctx.fillRect(0, 0, this.vScreen.vW, this.vScreen.vH);\n      this.playButton.draw(this.ctx);\n    }\n  }]);\n\n  return Stop;\n}();\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/main/stop.js?");

/***/ }),

/***/ "./src/index.scss":
/*!************************!*\
  !*** ./src/index.scss ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://io.gswcott.bubbleanimals/./src/index.scss?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	__webpack_require__("./src/index.js");
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.scss");
/******/ 	
/******/ })()
;